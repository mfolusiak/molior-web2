<span class="title"><mat-icon>library_books</mat-icon>Build {{build.id}}: {{build.sourcename}} {{build.version}}</span>

<div class="mat-elevation-z8 info-table">
    <div>
        <table style="border-collapse: collapse">
            <tr>
                <td><strong>Source Name</strong></td>
                <td>{{build.sourcename}}</td>
            </tr>
            <tr *ngIf="build.version">
                <td><strong>Version</strong></td>
                <td>{{build.version}}</td>
            </tr>
            <tr>
                <td><strong>State</strong></td>
                <td>
                    <mat-icon class="mat-icon notranslate material-icons buildstate buildstate-{{build.buildstate}}" matTooltip="{{build.buildstate}}" [matTooltipPosition]="'left'" [ngStyle]="{'font-size': '19px', height: 'unset', width: 'unset'}">{{buildicon(build.buildstate)}}</mat-icon>
                    <span [ngClass]="'progress'" *ngIf="build.progress && ( build.buildstate == 'building' || build.buildstate == 'publishing' )">{{build.progress | number:'1.0-0'}}%</span>
                </td>
        </table>
    </div>
    <div style="flex-grow: 1; text-align: right;">
        <button mat-icon-button [matMenuTriggerFor]="menu" aria-label="">
            <mat-icon>menu</mat-icon>
        </button>
        <mat-menu #menu="matMenu">
            <!--<button mat-menu-item (click)="delete()"><mat-icon>delete</mat-icon> Delete</button>-->
            <button mat-menu-item (click)="rebuild()"><mat-icon>replay</mat-icon> Retry Build</button>
            <button mat-menu-item (click)="buildlatest()"><mat-icon>sync_alt</mat-icon>Check for new builds</button>
        </mat-menu>
    </div>
</div>

<div style="display: flex">
    <h2>Build Log</h2>
    <div style="align-self: end; flex-grow: 1; text-align: right; align-content: end; display: flex; justify-content: end;">
        <mat-checkbox *ngIf="this.build.buildstate === 'building'" [checked]="follow" (change)="toggleFollow()">follow</mat-checkbox>
        <button mat-button *ngIf="this.build.buildstate === 'build_failed' && totalerr > 0" (click)="findError()">Find Error ({{currenterr}}/{{totalerr}})</button>
        <mat-paginator style="display: inline-block; width: 400px; max-width: 400px;" showFirstLastButtons hidePageSize></mat-paginator>
    </div>
</div>
<div id="log-wrapper" class="mat-elevation-z8" (window:resize)="updatePaginator()">
    <div id="log-scroll" class="log-scroll" tabindex="0" (scroll)="updatePaginator()">
        <table class="log-table">
            <tbody id="buildlog">
            </tbody>
        </table>
    </div>
</div>
